<!DOCTYPE HTML>
<html lang="en" class="light" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Github Integration - Grants Pass GIS Documentation</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body class="sidebar-visible no-js">
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('light')
            html.classList.add(theme);
            var body = document.querySelector('body');
            body.classList.remove('no-js')
            body.classList.add('js');
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var body = document.querySelector('body');
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            body.classList.remove('sidebar-visible');
            body.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="overview.html"><strong aria-hidden="true">1.</strong> Home</a></li><li class="chapter-item expanded "><a href="addressing.html"><strong aria-hidden="true">2.</strong> Addressing Manual</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="address_request.html"><strong aria-hidden="true">2.1.</strong> The Address Request Form</a></li><li class="chapter-item expanded "><a href="addressing_layer.html"><strong aria-hidden="true">2.2.</strong> The Addressing Layer</a></li><li class="chapter-item expanded "><a href="addressing_rules.html"><strong aria-hidden="true">2.3.</strong> Addressing Rules</a></li><li class="chapter-item expanded "><a href="addressing_policies.html"><strong aria-hidden="true">2.4.</strong> Addressing Policies</a></li><li class="chapter-item expanded "><a href="address_verification.html"><strong aria-hidden="true">2.5.</strong> Address Verification</a></li><li class="chapter-item expanded "><a href="address_strategic_plan.html"><strong aria-hidden="true">2.6.</strong> Address Strategic Plan</a></li><li class="chapter-item expanded "><a href="lexisnexis.html"><strong aria-hidden="true">2.7.</strong> LexisNexis Tables</a></li></ol></li><li class="chapter-item expanded "><a href="publishing_services.html"><strong aria-hidden="true">3.</strong> Services</a></li><li class="chapter-item expanded "><a href="layer_files.html"><strong aria-hidden="true">4.</strong> Layer Files</a></li><li class="chapter-item expanded "><a href="survey_points.html"><strong aria-hidden="true">5.</strong> Survey Points</a></li><li class="chapter-item expanded "><a href="packages_intro.html"><strong aria-hidden="true">6.</strong> Packages</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="github.html" class="active"><strong aria-hidden="true">6.1.</strong> Github Integration</a></li><li class="chapter-item expanded "><a href="using_git.html"><strong aria-hidden="true">6.2.</strong> Using git</a></li><li class="chapter-item expanded "><a href="git_workflow.html"><strong aria-hidden="true">6.3.</strong> Git Workflow</a></li><li class="chapter-item expanded "><a href="virtual_env.html"><strong aria-hidden="true">6.4.</strong> Using a Virtual Environment</a></li><li class="chapter-item expanded "><a href="web_services_update.html"><strong aria-hidden="true">6.5.</strong> Updating Web Services</a></li></ol></li><li class="chapter-item expanded "><a href="utility_editing.html"><strong aria-hidden="true">7.</strong> Utility Editing</a></li><li class="chapter-item expanded "><a href="utility_network_creation.html"><strong aria-hidden="true">8.</strong> Utility Network Creation</a></li><li class="chapter-item expanded "><a href="scripts_intro.html"><strong aria-hidden="true">9.</strong> Stand-Alone Scripts</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="missing_sidewalks.html"><strong aria-hidden="true">9.1.</strong> Missing Sidewalks</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <!-- Track and set sidebar scroll position -->
        <script>
            var sidebarScrollbox = document.querySelector('#sidebar .sidebar-scrollbox');
            sidebarScrollbox.addEventListener('click', function(e) {
                if (e.target.tagName === 'A') {
                    sessionStorage.setItem('sidebar-scroll', sidebarScrollbox.scrollTop);
                }
            }, { passive: true });
            var sidebarScrollTop = sessionStorage.getItem('sidebar-scroll');
            sessionStorage.removeItem('sidebar-scroll');
            if (sidebarScrollTop) {
                // preserve sidebar scroll position when navigating via links within sidebar
                sidebarScrollbox.scrollTop = sidebarScrollTop;
            } else {
                // scroll sidebar to current active section when navigating via "next/previous chapter" buttons
                var activeSection = document.querySelector('#sidebar .active');
                if (activeSection) {
                    activeSection.scrollIntoView({ block: 'center' });
                }
            }
        </script>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Grants Pass GIS Documentation</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="github-integration"><a class="header" href="#github-integration">GitHub Integration</a></h1>
<p>This section describes the steps necessary to set up GitHub integration on your work machine, including installing git, generating an SSH key, connecting to the Grants Pass code repository, and troubleshooting connection errors. Using GitHub commands to save and merge code changes is fairly straightforward, and the familiarity that comes with daily or weekly use will make them second nature. However, the process of installing git and setting up a new user only occurs when setting up a new computer or welcoming a new member to the team, so although the process can be more involved and less familiar, it is a one-time cost that does not impact normal daily development.</p>
<h2 id="install-git"><a class="header" href="#install-git">Install git</a></h2>
<p><code>git</code> is the software that manages version control on your local machine, and so to integrate with GitHub online, <code>git</code> must be installed locally. The <code>winget</code> and <code>chocolatey</code> package managers can both help you install <code>git</code>, but it is also available as a <a href="https://git-scm.com/download/win">stand-alone package installer</a>. Feel free to use the default installation directory and other settings on the install wizard. <code>git</code> is a fully-featured software designed to handle much more complex code bases than the GIS packages developed at the City, and so we will we only be using a subset of its available functionality, but if you are curious you can read more about it in the <a href="https://git-scm.com/book/en/v2">Pro Git</a> book.</p>
<p>To ensure that git is installed correctly on your machine, use the command:</p>
<pre><code class="language-{bash}">  git --version
  # output: git version X.Y.Z
</code></pre>
<p>From the chapter on <a href="https://git-scm.com/book/en/v2/Getting-Started-First-Time-Git-Setup">First-Time Git Setup</a>, there are a couple setup commands that we need to run on a fresh install to register the user account that we will be using to interact with the Grants Pass code repository on GitHub. From the terminal, run the following commands:</p>
<pre><code class="language-{bash}">git config --global user.name "grantspassoregon"
git config --global user.email "GIS@grantspassoregon.gov"
</code></pre>
<h2 id="connecting-to-github-with-ssh"><a class="header" href="#connecting-to-github-with-ssh">Connecting to GitHub with SSH</a></h2>
<p>The GIS office uses SSH deploy keys to manage access to the GitHub repository. The instructions here are a summary of the content on the <a href="https://docs.github.com/en/authentication/connecting-to-github-with-ssh">Connecting to GitHub with SSH</a> page, and describe process for generating a private-public key pair and registering the new public key on GitHub.</p>
<h3 id="check-for-an-existing-ssh-key"><a class="header" href="#check-for-an-existing-ssh-key">Check for an existing SSH key</a></h3>
<p>The use case for this document is for new users, or existing users moving to a new machine, so it is not likely that there are already existing SSH keys available for use. However, this is how to check and make sure:</p>
<ol>
<li>
<p>Open Git Bash. Git Bash is a terminal application installed with <code>git</code>. If you press the Windows key and type "Git Bash" into the search bar, the app should appear under the "Best Match" heading, and you can click on the icon to open it, or select the "Open" option in the app description pane.</p>
</li>
<li>
<p>Enter <code>ls -al ~/.ssh</code> to see if existing keys are present.</p>
<pre><code class="language-{bash}">ls -al ~/.ssh
# Lists the files in your .ssh directory, if they exist
</code></pre>
</li>
<li>
<p>Check the directory listing to see if you already have a public SSH key. GitHub supports the following filenames for public keys:</p>
<ul>
<li>id_rsa.pub</li>
<li>id_ecdsa.pub</li>
<li>id_ed25519.pub</li>
</ul>
</li>
<li>
<p>Either generate a new SSH key or upload an existing key.</p>
<ul>
<li>If one or more keys already exist, you do not have to use them and can generate a new key.</li>
<li>You can elect to add an existing key to the ssh-agent and use it to connect to GitHub as well.</li>
<li>If an existing key is not present, follow the instructions below to create a new key.</li>
</ul>
</li>
</ol>
<h3 id="generating-a-new-ssh-key"><a class="header" href="#generating-a-new-ssh-key">Generating a new SSH key</a></h3>
<p>These are the instructions to generate a new SSH key on your local machine. After generating the key, you can add the key to the repository account on GitHub to enable authentication for <code>git</code> operations over SSH.</p>
<ol>
<li>
<p>Open Git Bash.</p>
</li>
<li>
<p>Enter the following command:</p>
<pre><code class="language-{bash}">ssh-keygen -t ed25519 -C "GIS@grantspassoregon.gov"
</code></pre>
<p>You can also use your individual work email as the label for the key. The response from the terminal should read:</p>
<pre><code class="language-{bash}">Generating public/private ed25519 key pair.
</code></pre>
<p>The system will then prompt you to "Enter a file in which to save the key", and you can press <strong>Enter</strong> to accept the default location. The GitHub instructions note that if there is an existing key under the same name, the system will ask if you want to overwrite the old key, and in this case recommends that you assign the new key a custom name instead by entering the default file location and replacing <em>id_ed25519</em> with your custom key name.</p>
<pre><code class="language-{bash}">Enter a file in which to save the key (C:/users/username/.ssh/id_ed25519): [Press Enter]
</code></pre>
</li>
<li>
<p>When the system prompts you to enter a passphrase, type in a secure password to use for the key:</p>
<pre><code class="language-{bash}">Enter passphrase (empty for no passphrase): [Type a passphrase]
Enter same passphrase again: [Type passphrase again]
</code></pre>
</li>
</ol>
<h3 id="adding-the-ssh-key-to-the-ssh-agent"><a class="header" href="#adding-the-ssh-key-to-the-ssh-agent">Adding the SSH key to the ssh-agent</a></h3>
<ol>
<li>
<p>Open Git Bash.</p>
</li>
<li>
<p>Manually start the ssh-agent.</p>
<pre><code class="language-{bash}"># start the ssh-agent in the background
$ eval "$(ssh-agent -s)"
&gt; Agent pid 59566
</code></pre>
<ul>
<li>The <code>eval</code> command is not valid in Powershell, but will work in Git Bash.</li>
</ul>
</li>
<li>
<p>Add the SSH private key to the ssh-agent.</p>
</li>
</ol>
<ul>
<li>
<p>If your key has a unique name, replace <em>id_ed25519</em> in the command with the unique key name.</p>
<pre><code class="language-{bash}">ssh-add ~/.ssh/id_ed25519
</code></pre>
</li>
</ul>
<h3 id="add-the-ssh-key-to-the-grants-pass-github-account"><a class="header" href="#add-the-ssh-key-to-the-grants-pass-github-account">Add the SSH key to the Grants Pass GitHub account</a></h3>
<p>Adding the public key to GitHub.com enables SSH access to the Grants Pass repository.</p>
<ol>
<li>
<p>Copy the SSH key to the clipboard.</p>
<pre><code class="language-{bash}"># copies the contents of the id_ed25519.pub file to the clipboard
clip &lt; ~/.ssh/id_ed25519.pub
</code></pre>
<ul>
<li>The <code>&lt;</code> operator is not valid in Powershell, but will work in Git Bash.</li>
<li>If <code>clip</code> is not working, open the file <em>id_ed25519.pub</em> in a text editor and copy it into the clipboard manually.</li>
</ul>
</li>
<li>
<p>In a web browser, log into GitHub.com as the user <em>grantspassoregon</em>, click the profile photo, then click <strong>Settings</strong>.</p>
</li>
<li>
<p>In the "Access" section of the sidebar, click <strong>SSH and GPG keys</strong>.</p>
</li>
<li>
<p>Click <strong>New SSH key</strong> or <strong>Add SSH key</strong>.</p>
</li>
<li>
<p>In the "Title" field, add a descriptive label for the new key, for instance a job role ("Technician").</p>
</li>
<li>
<p>Select "authentication" as the type of key.</p>
</li>
<li>
<p>Paste the public key from the clipboard into the "Key" field.</p>
</li>
<li>
<p>Click <strong>Add SSH key</strong>.</p>
</li>
</ol>
<ul>
<li>If prompted, confirm access to the account on GitHub.</li>
</ul>
<h3 id="test-the-ssh-connection"><a class="header" href="#test-the-ssh-connection">Test the SSH connection</a></h3>
<p>This step confirms that the SSH key has been successfully added to GitHub.</p>
<ol>
<li>
<p>Open Git Bash.</p>
</li>
<li>
<p>Connect to GitHub using the following command:</p>
<pre><code class="language-{bash}"># Attempts to open ssh connection to GitHub
ssh -T git@github.com
</code></pre>
<ul>
<li>The first time running, this command should return a warning:</li>
</ul>
<pre><code class="language-{bash}">&gt; The authenticity of host 'github.com (IP ADDRESS) can't be established.
&gt; ECDSA key fingerprint is SHA256:p2QAMXNIC1TJYWeIOttrVc98/R1BUFWu3/LiyKgUfQM.
&gt; Are you sure you want to continue connecting (yes/no)?
</code></pre>
<ul>
<li>Type <code>yes</code> to accept the connection. The fingerprint should match GitHub's <a href="https://docs.github.com/en/authentication/keeping-your-account-and-data-secure/githubs-ssh-key-fingerprints">public key fingerprint</a>.</li>
<li>The remote command should exit with code 1.</li>
<li>The resulting message should contain the username <em>grantspassoregon</em>:</li>
</ul>
<pre><code class="language-{bash}">&gt; Hi grantspassoregon!  You've successfully authenticated, but GitHub does not
&gt; provide shell access.
</code></pre>
</li>
</ol>
<h2 id="troubleshooting-github-authentication"><a class="header" href="#troubleshooting-github-authentication">Troubleshooting GitHub Authentication</a></h2>
<p>If the authentication process fails, it may result in the following error:</p>
<pre><code class="language-{bash}">&gt; Permission denied (publickey).
</code></pre>
<p>In this case, the GitHub <a href="https://docs.github.com/en/authentication/troubleshooting-ssh/error-permission-denied-publickey">docs</a> provide the following guidance:</p>
<ul>
<li>Make sure you are not logged into Git Bash as an administrator. Git is not designed to be used with elevated privileges. You should be logged in with your user account both to create the SSH key and when logging into GitHub.</li>
<li>Confirm that you are connecting to port 22 (the SSH port) on GitHub:</li>
</ul>
<pre><code class="language-{bash}"># test GitHub connection with verbose output
$ ssh -vT git@github.com
&gt; OpenSSH_for_Windows_8.1p1, LibreSSL 3.0.2
&gt; debug1: Connecting to github.com [IP ADDRESS] port 22.
&gt; debug1: Connection established.
</code></pre>
<ul>
<li>If you have mistyped "<a href="mailto:git@github.com">git@github.com</a>" the connection will fail.</li>
<li>Make sure you are opening a connection to the "git" user. If you try to connect with your GitHub username, it will fail:</li>
</ul>
<pre><code class="language-{bash}"># will not work
$ ssh -T grantspassoregon@github.com
&gt; Permission denied (publickey).
# will work
$ ssh -T git@github.com
&gt; Hi grantspassoregon!  You've successfully authenticated...
</code></pre>
<ul>
<li>
<p>Check that your key is loaded into SSH:</p>
<ul>
<li>Using Git Bash, turn on the ssh-agent using the following command:</li>
</ul>
<pre><code class="language-{bash}"># start the ssh-agent in the background
$ eval "$(ssh-agent -s)"
&gt; Agent pid 1445
</code></pre>
<ul>
<li>Verify the private key is generated and loaded:</li>
</ul>
<pre><code class="language-{bash}">ssh-add -l -E sha256
&gt; 256 SHA256:aVWpUNY8xC0f+0wLBLA3mJ1JWRNjIVaXZhTdX4ONO2Q GIS@grantspassoregon.gov (ED25519)
</code></pre>
<p>If the ssh-add command does not print out a long string of numbers and letters, this indicates you either need to generate a new key or associate an existing key with GitHub.</p>
</li>
<li>
<p>Check that the OpenSSH Authentication Agent service is running:</p>
<ul>
<li>Open the Windows start menu by pressing the Windows key or clicking on the desktop search bar.</li>
<li>Type "Services" and select the Services app.
<img src="./images/services_app.png" alt="the Services app" /></li>
<li>Scroll to locate the OpenSSH Authentication Agent service.
<img src="./images/services_openssh.png" alt="the OpenSSH Authentication Agent service" /></li>
<li>If the service is disabled, enable it by double-clicking on the services, and selecting "Automatic" from the <em>Startup type</em> field.
<img src="./images/openssh_enable.png" alt="set Startup type to Automatic" /></li>
</ul>
</li>
</ul>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="packages_intro.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="using_git.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="packages_intro.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="using_git.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
